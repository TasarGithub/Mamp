# error document
ErrorDocument 404 http://www.euroheater.fboss.ru

# задаем кодировку по умолчанию
php_value default_charset cp1251
AddDefaultCharset windows-1251

# directory index
DirectoryIndex index.php

# php errors
php_flag display_errors On
# php_flag display_errors Off

# аналог error_reporting(E_ALL ^ E_NOTICE ^ E_WARNING  ^ E_DEPRECATED);
php_value error_reporting 22517

# запрет на прямой доступ к 'db.connection.php'
<Files "db.connection.php">
deny from all
</Files>

# запрет на прямой доступ к '*.backup'
<Files "*.backup">
deny from all
</Files>

# apache mod_rewrite
RewriteEngine on

# Защита от клонов
RewriteCond %{HTTP_HOST} !^euroheater\.fboss\.ru$ [NC]
RewriteCond %{HTTP_HOST} !^www\.euroheater\.fboss\.ru$ [NC]
RewriteRule .* - [F,L]

# redirect all pages "without www" to "with www"
# RewriteCond %{HTTP_HOST} !^www\..*$
# RewriteRule ^.*$ http://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

# 301 всех запросов с http или без www на https://www.
RewriteCond %{HTTP:X-Forwarded-Proto} !https [OR]
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule (.*) https://www.euroheater.fboss.ru%{REQUEST_URI} [R=301,L]

# 301 от 6 ноября 2015
RewriteRule ^pages\/teploobmenniki_plast\.htm$ http://www.euroheater.ru/teploobmenniki/ [R=301,L]
RewriteRule ^pages\/kalorifer%20ksk\.htm$ http://www.euroheater.ru/kalorifery/ [R=301,L]
RewriteRule ^pages\/flanges\.htm$ http://www.euroheater.ru [R=301,L]
RewriteRule ^pages\/flanges_12820-80\.htm$ http://www.euroheater.ru [R=301,L]
RewriteRule ^pages\/flanges_12821-80\.htm$ http://www.euroheater.ru [R=301,L]
RewriteRule ^pages\/flanges_25662\.htm$ http://www.euroheater.ru [R=301,L]
RewriteRule ^pages\/ventilator_smoke\.htm$ http://www.euroheater.ru [R=301,L]
RewriteRule ^pages\/ventilator_smoke1\.htm$ http://www.euroheater.ru [R=301,L]
RewriteRule ^pages\/ventilator_smoke2\.htm$ http://www.euroheater.ru [R=301,L]
RewriteRule ^pages\/ventilator_smoke3\.htm$ http://www.euroheater.ru [R=301,L]
RewriteRule ^pages\/ventilator_smoke4\.htm$ http://www.euroheater.ru [R=301,L]

### MVC-движок
# ЕДИНАЯ ТОЧКА ВХОДА ВСЕХ ЗАПРОСОВ НА САЙТ
# проверяем, существует ли запрашиваемый файл или директория
# если нет, то перенаправляем запрос на index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# описание флага QSA: http://httpd.apache.org/docs/2.4/rewrite/flags.html
RewriteRule ^(.*)$ index.php?route=$1 [L,QSA]